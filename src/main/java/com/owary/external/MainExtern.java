package com.owary.external;

import com.owary.external.model.Bookstore;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Unmarshaller;
import java.io.FileNotFoundException;
import java.io.FileReader;

public class MainExtern {

    /***
     * Purpose here is to parse an XML file which is not generated by Marshaller to a Java Object
     */

    public static void main(String[] args) throws JAXBException, FileNotFoundException {
        /*  first thing to do is to get the JAXB Context based on the root object which is bookstore
            because our XML file is of the form
            <bookstore>
                <book>...</book>
                <book>...</book>
                ...
            </bookstore>
        */
        JAXBContext ctx = JAXBContext.newInstance(Bookstore.class);
        // Next thing is to create an unmarshaller
        // it simply reads from the text file and constructs an object
        Unmarshaller unmarshaller = ctx.createUnmarshaller();
        // retrieve the object
        Bookstore bookstore = (Bookstore) unmarshaller.unmarshal(new FileReader("bookstore.xml"));
        // print it out
        System.out.println(bookstore);
    }

}
